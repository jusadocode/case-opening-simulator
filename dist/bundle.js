(()=>{"use strict";var __webpack_modules__={435:()=>{eval("\n;// CONCATENATED MODULE: ./src/utilities/mathUtils.js\nfunction getRandomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction getRandomFloat(min, max) {\r\n  return (Math.random() * (max - min) + min).toFixed(4);\r\n}\r\n\r\nfunction randomGenItem(array, distribution) {\r\n  const index = randomIndex(distribution);\r\n  return array[index];\r\n}\r\n  \r\nfunction createDistribution(items, size, selectedCase) {\r\n  const distribution = [];\r\n  const weights = calculateItemWeights(items, selectedCase);\r\n  \r\n  const sum = weights.reduce((accum, currVal) => accum + currVal);\r\n  const quant = size / sum;\r\n  for (let i = 0; i < weights.length; ++i) {\r\n    const limit = quant * weights[i];\r\n    for (let j = 0; j < limit; ++j) {\r\n      distribution.push(i);\r\n    }\r\n  }\r\n  return distribution;\r\n}\r\n\r\nfunction calculateItemWeights(items, selectedCase) {\r\n  const weights = items.map(\r\n    item => (item.odds / (selectedCase.caseRarityCounts[item.rarity.name] || 1) / 100)\r\n  );\r\n  return weights;\r\n}\r\n  \r\nfunction randomIndex(distribution) {\r\n  const index = Math.floor(distribution.length * Math.random()); // random index\r\n  return distribution[index];\r\n}\r\n\r\n\r\n\r\n  \n;// CONCATENATED MODULE: ./src/utilities/crateUtils.js\n\r\n\r\nfunction getRarityOdds(crate) {\r\n  const rarityCounts = {\r\n    Consumer: 0,\r\n    Industrial: 0,\r\n    'Mil-Spec Grade': 0,\r\n    Restricted: 0,\r\n    Classified: 0,\r\n    Covert: 0,\r\n    Contraband: 0,\r\n    'High Grade': 0,\r\n    Remarkable: 0,\r\n    Exotic: 0,\r\n    Extraordinary: 0\r\n  };\r\n\r\n  crate.contains.forEach((item) => {\r\n    const rarityName = item.rarity.name;\r\n\r\n    if (rarityCounts.hasOwnProperty(rarityName)) {\r\n      rarityCounts[rarityName]++;\r\n    } else {\r\n      console.warn(`Unknown rarity: ${rarityName}`);\r\n    }\r\n  });\r\n\r\n  const filteredRarityCounts = Object.fromEntries(\r\n    Object.entries(rarityCounts).filter(([rarity, count]) => count > 0)\r\n  );\r\n\r\n  return filteredRarityCounts;\r\n}\r\n\r\nfunction getRarityColor(item) {\r\n\r\n  if(item.category) {\r\n    if (item.category.name === 'Knives' || item.category.name === 'Gloves')\r\n      return '#ffcc00'; \r\n  }\r\n  \r\n  switch (item.rarity.name) {\r\n    case 'Consumer Grade':\r\n      return '#afafaf';\r\n    case 'Industrial Grade':\r\n      return '#6496e1'; \r\n    case 'Mil-Spec Grade':\r\n      return '#4b69cd'; \r\n    case 'Restricted':\r\n      return '#8847ff'; \r\n    case 'Classified':\r\n      return '#d32ce6'; \r\n    case 'Covert':\r\n      return '#eb4b4b'; \r\n    case 'Contraband':\r\n      return '#886a08'; \r\n    \r\n    case 'High Grade':\r\n      return '#4b69cd'; \r\n    case 'Remarkable':\r\n      return '#8847ff'; \r\n    case 'Exotic':\r\n      return '#d32ce6'; \r\n    case 'Extraordinary':\r\n      return '#eb4b4b'; \r\n\r\n    default:\r\n      return ''; \r\n  }\r\n}\r\n\r\n\r\n\r\nfunction getRandomWear(item) {\r\n  if(item.wears) {\r\n    return item.wears[getRandomInt(0, item.wears.length-1)].name;\r\n  }\r\n  return '';\r\n}\r\n\r\n\r\n  \n;// CONCATENATED MODULE: ./src/report-section.js\n\r\n//// CAUTION RELATED TO CUSTOM VALIDATION \r\n// Mixing default html validation with custom provides difficult results\r\n// disable default html validations if possible\r\n\r\nconst reportButton = document.querySelector('.report-button');\r\nconst reportDialog = document.querySelector('#report-dialog');\r\nconst submitloadingIndicator = document.querySelector('#submitLoadingIndicator');\r\n\r\nlet nameInput = document.querySelector('#name');\r\nlet emailInput = document.querySelector('#e-mail');\r\nlet ideasInput = document.querySelector('#report');\r\nlet exitButton = document.querySelector('.exitButton');\r\nlet submitButton = document.querySelector('#submitButton');\r\nlet statusLabel = document.querySelector('#statusLabel');\r\n\r\nreportButton.addEventListener('click', () => {\r\n  // Show the dialog\r\n  reportDialog.classList.add('animated');\r\n  reportDialog.classList.add('fadeInReport');\r\n  reportDialog.showModal();\r\n  initializeInputs();\r\n  \r\n});\r\n\r\nexitButton.addEventListener('click', () => reportDialog.close());\r\n\r\nsubmitButton.addEventListener('click', handleSubmit);\r\n\r\nfunction initializeInputs() {\r\n  nameInput.addEventListener('input', nameVerification);\r\n  emailInput.addEventListener('input', emailVerification);\r\n  ideasInput.addEventListener('input', ideasVerification);\r\n}\r\n\r\nasync function handleSubmit(event) {\r\n\r\n  statusLabel.textContent = '';\r\n  event.preventDefault();\r\n\r\n  let isValid = true;\r\n\r\n  if (!nameVerification()) isValid = false;\r\n  if (!emailVerification()) isValid = false;\r\n  if (!ideasVerification()) isValid = false;\r\n\r\n  if (isValid) {\r\n    \r\n    const reportObj = {\r\n      name: nameInput.value,\r\n      email: emailInput.value,\r\n      text: ideasInput.value\r\n    };\r\n\r\n    let baseUrl = '';\r\n  \r\n    if(true) {\r\n      \r\n      //baseUrl = 'http:localhost:5500'; Local prod test\r\n      baseUrl = window.location.href;\r\n      baseUrl = baseUrl.slice(0, -1);\r\n    }\r\n    try {\r\n\r\n      enableIndicator();\r\n      disableButton();\r\n      \r\n      const response = await fetch(`${baseUrl}/send-email`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(reportObj)\r\n        \r\n      });\r\n\r\n      if (response.ok) {\r\n        statusLabel.textContent = 'Thank you for your feedback!';\r\n      } else {\r\n        statusLabel.textContent = 'Failed to send feedback';\r\n        enableButton();\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      statusLabel.textContent = `Error: ${error.message}`;\r\n      enableButton();\r\n      return;\r\n    }\r\n    finally {\r\n      disableIndicator();\r\n    }\r\n\r\n\r\n    setTimeout(()=>{\r\n      resetInputs();\r\n      reportDialog.close();\r\n    }, 1000);\r\n    \r\n  }\r\n}\r\n\r\n\r\nfunction nameVerification() {\r\n  if (nameInput.value.trim() === '') {\r\n    nameInput.setCustomValidity('Write your name');\r\n    nameInput.reportValidity();\r\n    return false;\r\n  }\r\n\r\n  nameInput.setCustomValidity('');\r\n  nameInput.reportValidity();\r\n\r\n  return true;\r\n}\r\n\r\nfunction emailVerification() {\r\n\r\n  // If chosen to write email - write it properly\r\n  if (emailInput.value.trim() === '') {\r\n    return true;\r\n  }\r\n  else if (emailInput.validity.typeMismatch) {\r\n    emailInput.setCustomValidity('Make sure to provide proper email');\r\n    emailInput.reportValidity();\r\n    return false;\r\n  } else {\r\n    emailInput.setCustomValidity('');\r\n  }\r\n\r\n  emailInput.reportValidity();\r\n  return true;\r\n}\r\n\r\nfunction ideasVerification() {\r\n  if (ideasInput.value.trim() === '') {\r\n    ideasInput.setCustomValidity('Say something, your feedback is important :)');\r\n    ideasInput.reportValidity();\r\n    return false;\r\n  }\r\n\r\n  else if (ideasInput.value.length < 15) {\r\n    ideasInput.setCustomValidity('Try to be as insightful as you can!');\r\n    ideasInput.reportValidity();\r\n    return false;\r\n  }\r\n  else {\r\n    ideasInput.setCustomValidity('');\r\n  }\r\n\r\n  ideasInput.reportValidity();\r\n  return true;\r\n}\r\n\r\nfunction resetInputs() {\r\n  nameInput.value = '';\r\n  emailInput.value = '';\r\n  ideasInput.value = '';\r\n  statusLabel.textContent = '';\r\n  enableButton();\r\n}\r\n\r\nfunction enableIndicator() {\r\n  submitloadingIndicator.style.display = 'block';\r\n}\r\nfunction disableIndicator() {\r\n  submitloadingIndicator.style.display = 'none';\r\n}\r\n\r\nfunction disableButton() {\r\n  submitButton.disabled = true;\r\n  submitButton.style.display = 'none';\r\n}\r\nfunction enableButton() {\r\n  submitButton.disabled = false;\r\n  submitButton.style.display = 'block';\r\n}\r\n\r\n\r\n/* harmony default export */ const report_section = ((/* unused pure expression or super */ null && (reportButton)));\n;// CONCATENATED MODULE: ./src/services/services.js\nasync function callApi(urlPostfix) {\r\n\r\n  // Change this for production build (it wont be using localhost)\r\n  let baseUrl = '';\r\n  \r\n  if(true) {\r\n    \r\n    //baseUrl = 'http:localhost:5500'; Local prod test\r\n    baseUrl = window.location.href;\r\n    baseUrl = baseUrl.slice(0, -1);\r\n  }\r\n  \r\n  let url = `${baseUrl}/${urlPostfix}`;\r\n  \r\n  return fetch(url)\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      return data;\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n      return null; \r\n    });\r\n}\r\n  \r\nasync function fetchCaseData() {\r\n  try {\r\n    const data = await callApi('data/cases');\r\n    console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching case data:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function fetchCapsuleData() {\r\n  try {\r\n    const data = await callApi('data/capsules');\r\n    console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching capsule data:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function fetchSouvenirData() {\r\n  try {\r\n    const data = await callApi('data/souvenirs');\r\n    console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching souvenir data:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function fetchAutographCapsuleData() {\r\n  try {\r\n    const data = await callApi('data/autograph_capsules');\r\n    console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching autograph capsule data:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function fetchGraffitiData() {\r\n  try {\r\n    const data = await callApi('data/graffitis');\r\n    console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching graffiti data:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function fetchPinData() {\r\n  try {\r\n    const data = await callApi('data/pins');\r\n    console.log(data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching pin data:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n\n;// CONCATENATED MODULE: ./src/utilities/styleUtils.js\n\r\n\r\nfunction createLoadingIndicator() {\r\n  const loadingIndicator = document.createElement('div');\r\n  loadingIndicator.className = 'lds-ellipsis';\r\n  loadingIndicator.innerHTML = '<div></div><div></div><div></div><div></div>';\r\n  return loadingIndicator;\r\n}\r\n  \r\n// Utility function to hide the loading indicator and show the original content\r\nfunction showLoadingIndicatorInElement(element) {\r\n  const loadingIndicator = createLoadingIndicator();\r\n  loadingIndicator.id = 'loadingIndicator';\r\n  element.innerHTML = '';\r\n  element.appendChild(loadingIndicator);\r\n}\r\n  \r\n// Utility function to hide the loading indicator\r\nfunction hideLoadingIndicatorInElement(element, originalContent) {\r\n  element.innerHTML = originalContent;\r\n}\r\n\r\nfunction getBorderRadius() {\r\n  \r\n  const borderRadiusInstructions = [\r\n    '10px 20px 30px 40px',\r\n    '25% 10%',\r\n    '10% 20% 40% 20%;',\r\n    '10% / 50%',\r\n    '10px 100px / 120px',\r\n    '50% 20% / 10% 40%'\r\n  ];\r\n\r\n  return borderRadiusInstructions[getRandomInt(0, borderRadiusInstructions.length-1)];\r\n\r\n}\r\n\r\n\n;// CONCATENATED MODULE: ./src/index.js\n/////////////////////////////////\r\n// Dont use the word case in the code\r\n/////////////////////////////////\r\n\r\n\r\n\r\n // need to load report section, otherwise add in webpack entries\r\n\r\n\r\n\r\n\r\n\r\nlet statusText = document.querySelector('#status');\r\nlet moneyStatus = 4.35;\r\nconst keyPrice = 2.34;\r\n\r\nlet itemHolder = document.querySelector('.item-holder');\r\nconst caseOpenWindowHolder = document.querySelector('.case-open-window-holder');\r\nlet caseImageSection = document.querySelector('.case-image-section');\r\n\r\nconst caseLoadingIndicator = document.querySelector('#caseLoadingIndicator');\r\nconst interactionContainer = document.querySelector('.interaction-container');\r\n\r\nlet containerSelect = document.querySelector('#case');\r\n\r\nconst containerTypeSelect = document.querySelector('#container-type');\r\n\r\nconst src_button = document.querySelector('.open-button');\r\nlet reopenButton;\r\nlet backButton;\r\n\r\nlet containers = [];\r\nlet selectedCase = {};\r\nlet fixedItemCount = 18;\r\n\r\nconst rollItemCount = 150;\r\nlet rolledItems = [];\r\nlet distribution = [];\r\n\r\nconst itemRarityCounts = {\r\n  'Consumer Grade': 0,\r\n  'Industrial Grade': 0,\r\n  'Mil-Spec Grade': 0,\r\n  Restricted: 0,\r\n  Classified: 0,\r\n  Covert: 0,\r\n  Contraband: 0,\r\n  'High Grade': 0,\r\n  Remarkable: 0,\r\n  Exotic: 0,\r\n  Extraordinary: 0\r\n};\r\n\r\n\r\ninitializeContainerLoad();\r\n\r\nasync function initializeContainerLoad(containerType = 'cases') {\r\n  try {\r\n    \r\n    switch(containerType) {\r\n      case 'cases':\r\n        containers = await callApi('data/cases');\r\n        break;\r\n      case 'capsules':\r\n        containers = await callApi('data/capsules');\r\n        break;\r\n      case 'souvenirs':\r\n        containers = await callApi('data/souvenirs');\r\n        break;\r\n      case 'autograph_capsules':\r\n        containers = await callApi('data/autograph_capsules');\r\n        break;\r\n      case 'graffitis':\r\n        containers = await callApi('data/graffitis');\r\n        break;\r\n      case 'pins':\r\n        containers = await callApi('data/pins');\r\n        break;\r\n      default:\r\n        containers = [];\r\n        break;\r\n    }\r\n\r\n    containerSelect.innerHTML = '';\r\n\r\n    containers.map((container, index) => {\r\n      let option = document.createElement('option');\r\n      option.value = index;\r\n      option.textContent = container.price ? `${container.name} (${container.price}$)` : container.name;\r\n      containerSelect.appendChild(option);\r\n    });\r\n\r\n    setSelectedContainer(containers[containerSelect.value]);\r\n    caseOpenWindowHolder.disabled = true;\r\n\r\n    displayInitialItems();\r\n    initializeEventListeners();\r\n  } catch (error) {\r\n    console.error('Error loading containers:', error);\r\n    interactionContainer.innerHTML = 'There was a problem loading containers, refresh the page or try again later.';\r\n  } finally {\r\n    caseLoadingIndicator.style.display = 'none';\r\n    interactionContainer.style.display = 'flex';\r\n  }\r\n}\r\n\r\nfunction handleOpenButtonClick() {\r\n  openCase();\r\n  instantiateMoneyAmount('red');\r\n}\r\n\r\nfunction handleBackButtonClick() {\r\n  const lastChild = caseOpenWindowHolder.lastChild;\r\n  if (lastChild && lastChild.classList.contains('obtainedItem')) {\r\n    caseOpenWindowHolder.removeChild(lastChild);\r\n  }\r\n}\r\n\r\nfunction initializeEventListeners() {\r\n  src_button.addEventListener('click', handleOpenButtonClick);\r\n\r\n  reopenButton = src_button.cloneNode(true);\r\n\r\n  reopenButton.textContent = `Open another (-${keyPrice}$)`;\r\n  reopenButton.style.color = 'white';\r\n\r\n  reopenButton.addEventListener('click', handleOpenButtonClick);\r\n\r\n  backButton = src_button.cloneNode(true);\r\n\r\n  backButton.textContent = 'Back';\r\n  backButton.style.color = 'white';\r\n\r\n  backButton.addEventListener('click', handleBackButtonClick);\r\n\r\n  containerSelect.addEventListener('change', () => setSelectedContainer(containers[containerSelect.value]));\r\n\r\n  containerTypeSelect.addEventListener('change', () => {\r\n    const selectedType = containerTypeSelect.value;\r\n    initializeContainerLoad(selectedType); // Load containers based on selected type\r\n  });\r\n\r\n}\r\n\r\n\r\n\r\nfunction displayInitialItems() {\r\n\r\n  const caseItemsList = [...selectedCase.contains];\r\n\r\n  for (let i = 0; i < 10; i++) {\r\n    let randomItem = caseItemsList[getRandomInt(0, caseItemsList.length - 1)];\r\n\r\n    let newItem = createItemElement(randomItem);\r\n    \r\n    itemHolder.appendChild(newItem);\r\n\r\n  }\r\n\r\n}\r\n\r\nfunction createItemElement(item) {\r\n  const newItem = document.createElement('div');\r\n  newItem.classList.add('item');\r\n\r\n  const img = document.createElement('img');\r\n  if (item.image) {\r\n    if(item.category) {\r\n      if (item.category.name === 'Knives' || item.category.name === 'Gloves')\r\n        img.classList.add('exceedinglyRare');\r\n        // webpack fix\r\n    }\r\n\r\n    img.src = item.image;\r\n  }\r\n  else\r\n    img.src = './assets/images/xray.png';\r\n\r\n  img.classList.add('image');\r\n\r\n  const rarityColor = getRarityColor(item);\r\n\r\n  newItem.style.backgroundImage = `linear-gradient(white 40%, ${rarityColor})`;\r\n\r\n  const rarityBox = document.createElement('div');\r\n  rarityBox.classList.add('item-rarity-box');\r\n  rarityBox.style.backgroundColor = rarityColor;\r\n\r\n  newItem.appendChild(img);\r\n  newItem.appendChild(rarityBox);\r\n\r\n  return newItem;\r\n}\r\n\r\nfunction initiateRollingProcess() {\r\n  return new Promise((resolve) => {\r\n    let translateX = getRandomInt(-5000, -6000);\r\n    caseOpenWindowHolder.style.setProperty('--random-translateXb', `${translateX}px`);\r\n    translateX -= caseOpenWindowHolder.offsetWidth / 2; // position of marker\r\n    const itemNumber = Math.floor((translateX / 150) * -1);\r\n\r\n    src_button.classList.add('animated', 'bounceOut');\r\n    src_button.disabled = true;\r\n\r\n    caseOpenWindowHolder.classList.add('animated', 'flipInX');\r\n\r\n    setTimeout(() => {\r\n      src_button.disabled = false;\r\n      src_button.classList.remove('animated', 'bounceOut');\r\n      caseOpenWindowHolder.classList.remove('animated', 'flipInX');\r\n      resolve(itemNumber);\r\n    }, 6000);\r\n  });\r\n  \r\n}\r\n\r\nasync function determineItemWon(items) {\r\n  for (let i = 0; i < rollItemCount; i++) {\r\n    const randomItem = randomGenItem(items, distribution);\r\n    rolledItems.push(randomItem);\r\n    const newItem = createItemElement(randomItem);\r\n    newItem.classList.add('animatedItem', 'moveLeft');\r\n    itemHolder.appendChild(newItem);\r\n  }\r\n\r\n  const itemNumber = await initiateRollingProcess();\r\n\r\n  return rolledItems[itemNumber];\r\n}\r\n\r\nasync function getItemInfo(itemWon, itemWear) {\r\n  let price;\r\n  try {\r\n    const category = itemWon.category ? itemWon.category.name : '';\r\n    const data = await callApi(`data/price?&caseType=${selectedCase.type}&item=${itemWon.name}&&wear=${itemWear || ''}&itemID=${itemWon.id}&category=${category}`);\r\n    price = data.lowest_price;\r\n    const worth = parseFloat(price.slice(1));\r\n    moneyStatus += worth;\r\n    instantiateMoneyAmount('green');\r\n    updateMoneyStatus();\r\n  } catch (error) {\r\n    console.error('Error fetching item price:', error);\r\n    price = 'Market price not available';\r\n  }\r\n  let itemInfo = { name: itemWon.name, rarity: itemWon.rarity.name, price};\r\n\r\n  const minFloat = itemWon.min_float; \r\n  const maxFloat = itemWon.max_float; \r\n  \r\n  const float = (minFloat !== undefined && maxFloat !== undefined) \r\n      ? getRandomFloat(minFloat, maxFloat) \r\n      : undefined; \r\n\r\n  itemRarityCounts[itemWon.rarity]++;\r\n\r\n  if (float)\r\n    itemInfo.float = float;\r\n  \r\n  if (itemWear)\r\n    itemInfo.wear = itemWear;\r\n\r\n  return itemInfo;\r\n}\r\n\r\n\r\nasync function displayWonItem(itemWon) {\r\n  const obtainedItem = document.createElement('div');\r\n  obtainedItem.classList.add('obtainedItem');\r\n\r\n  const img = document.createElement('img');\r\n  img.src = itemWon.image || './assets/images/xray.png';\r\n  img.classList.add('obtained-image');\r\n  obtainedItem.appendChild(img);\r\n\r\n  const rarityColor = getRarityColor(itemWon);\r\n  const rarityBox = document.createElement('div');\r\n  rarityBox.classList.add('obtained-item-rarity-box');\r\n  rarityBox.style.backgroundColor = rarityColor;\r\n\r\n  obtainedItem.classList.add('animated', 'fadeIn');\r\n\r\n  const itemWear = getRandomWear(itemWon);\r\n  const itemInfo = await getItemInfo(itemWon, itemWear);\r\n\r\n  const obtainedText = document.createElement('div');\r\n  obtainedText.classList.add('obtainedItemInfo');\r\n  for (const [key, value] of Object.entries(itemInfo)) {\r\n    const par = document.createElement('p');\r\n    par.textContent = `${key.toUpperCase()}: ${value}`;\r\n    if (key === 'rarity') par.style.textShadow = `4px 2px 4px ${rarityColor}`;\r\n    obtainedText.appendChild(par);\r\n  }\r\n\r\n  const bottomSection = document.createElement('div');\r\n  bottomSection.classList.add('bottomSection');\r\n  bottomSection.appendChild(obtainedText);\r\n\r\n  const buttonSection = document.createElement('div');\r\n  buttonSection.classList.add('buttonSection');\r\n  buttonSection.appendChild(reopenButton);\r\n  buttonSection.appendChild(backButton);\r\n\r\n  bottomSection.appendChild(buttonSection);\r\n  obtainedItem.appendChild(bottomSection);\r\n  caseOpenWindowHolder.appendChild(obtainedItem);\r\n\r\n  setTimeout(() => {\r\n    obtainedItem.style.borderRadius = getBorderRadius();\r\n    obtainedItem.style.borderColor = rarityColor;\r\n  }, 500);\r\n}\r\n\r\nasync function openCase() {\r\n  try {\r\n    clearUpWindow();\r\n\r\n    let casePrice = 0;\r\n    if(selectedCase.price) {\r\n      casePrice = parseFloat(selectedCase.price);\r\n    }\r\n    \r\n    moneyStatus -= keyPrice + casePrice;\r\n    updateMoneyStatus();\r\n\r\n    const caseItemList = [...selectedCase.contains];\r\n    if(selectedCase.contains_rare.length > 0) {\r\n      const knives = [...selectedCase.contains_rare];\r\n      let randomKnife = {...knives[getRandomInt(0, 8)], odds: 0.26};\r\n  \r\n      if (caseItemList.length < fixedItemCount) \r\n        caseItemList.push(randomKnife);\r\n    }\r\n    \r\n\r\n    distribution = createDistribution(caseItemList, 100, selectedCase);\r\n\r\n    const itemWon = await determineItemWon(caseItemList);\r\n    await displayWonItem(itemWon);\r\n  } catch (error) {\r\n    console.error('Error opening case:', error);\r\n  }\r\n}\r\n\r\nfunction updateMoneyStatus() {\r\n  statusText.textContent = 'State: ' + moneyStatus.toFixed(2) + '$';\r\n}\r\n\r\n\r\nfunction clearUpWindow() {\r\n  itemHolder.innerHTML = '';\r\n  const obtainedItem = document.querySelector('.obtainedItem');\r\n  if (obtainedItem && obtainedItem.classList.contains('obtainedItem')) {\r\n    caseOpenWindowHolder.removeChild(obtainedItem);\r\n  }\r\n  rolledItems = [];\r\n}\r\n\r\n\r\nfunction instantiateMoneyAmount(color) {\r\n\r\n  statusText.style.color = color;\r\n  statusText.classList.add('highlight-amount');\r\n  setTimeout(() => {\r\n    statusText.style.color = 'black';\r\n    statusText.classList.remove('highlight-amount');\r\n  }, 1000);\r\n}\r\n\r\n\r\nfunction setSelectedContainer(container) {\r\n  selectedCase = {...container};\r\n  fixedItemCount = container.contains.length + 1;\r\n  if (!selectedCase.caseRarityCounts) {\r\n    selectedCase.caseRarityCounts = getRarityOdds(selectedCase);\r\n  }\r\n\r\n  let caseImage = document.createElement('img');\r\n  const caseImageSource = selectedCase.image;\r\n  caseImage.src = caseImageSource;\r\n\r\n  caseImageSection.innerHTML = '';\r\n  caseImageSection.appendChild(caseImage);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDM1LmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNzRjtBQUN0RixFOztBQzFDMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHNDQUFzQyxXQUFXO0FBQ2pEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFlBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDc0Q7QUFDdEQsRTs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxJQUFxQztBQUM1QztBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFFBQVE7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBZSw0REFBWSxJOztBQ2xMM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBcUM7QUFDMUM7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVEsR0FBRyxXQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGdCQUFnQjtBQUMvRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9GMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFlBQVk7QUFDOUM7QUFDQTtBQUNBOzs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDd0c7QUFDbEI7QUFDMUMsQ0FBQztBQUN4QjtBQUNXO0FBQzZCO0FBQ0o7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFVBQU07QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCLEdBQUcsZ0JBQWdCO0FBQ25GO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsVUFBTTtBQUNSO0FBQ0EsaUJBQWlCLFVBQU07QUFDdkI7QUFDQSwrQ0FBK0MsU0FBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUIsbUNBQW1DLFlBQVk7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBLGdFQUFnRSxZQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFlBQVk7QUFDakMsc0VBQXNFLFdBQVc7QUFDakYsd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQSxJQUFJLFVBQU07QUFDVixJQUFJLFVBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sVUFBTTtBQUNaLE1BQU0sVUFBTTtBQUNaO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQyx1QkFBdUIsYUFBYTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTyx5QkFBeUIsa0JBQWtCLFFBQVEsYUFBYSxTQUFTLGVBQWUsVUFBVSxXQUFXLFlBQVksU0FBUztBQUNoSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxjQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsYUFBYTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCLElBQUksTUFBTTtBQUNyRCxnRUFBZ0UsWUFBWTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGVBQWU7QUFDckQ7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixVQUFVLFlBQVk7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0Esb0NBQW9DLGFBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhc2Utb3BlbmluZy1zaW0vLi9zcmMvdXRpbGl0aWVzL21hdGhVdGlscy5qcz9hMTlkIiwid2VicGFjazovL2Nhc2Utb3BlbmluZy1zaW0vLi9zcmMvdXRpbGl0aWVzL2NyYXRlVXRpbHMuanM/ZjIxNSIsIndlYnBhY2s6Ly9jYXNlLW9wZW5pbmctc2ltLy4vc3JjL3JlcG9ydC1zZWN0aW9uLmpzP2YxMmMiLCJ3ZWJwYWNrOi8vY2FzZS1vcGVuaW5nLXNpbS8uL3NyYy9zZXJ2aWNlcy9zZXJ2aWNlcy5qcz81YjU5Iiwid2VicGFjazovL2Nhc2Utb3BlbmluZy1zaW0vLi9zcmMvdXRpbGl0aWVzL3N0eWxlVXRpbHMuanM/MTQzOCIsIndlYnBhY2s6Ly9jYXNlLW9wZW5pbmctc2ltLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJhbmRvbUZsb2F0KG1pbiwgbWF4KSB7XHJcbiAgcmV0dXJuIChNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pLnRvRml4ZWQoNCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJhbmRvbUdlbkl0ZW0oYXJyYXksIGRpc3RyaWJ1dGlvbikge1xyXG4gIGNvbnN0IGluZGV4ID0gcmFuZG9tSW5kZXgoZGlzdHJpYnV0aW9uKTtcclxuICByZXR1cm4gYXJyYXlbaW5kZXhdO1xyXG59XHJcbiAgXHJcbmZ1bmN0aW9uIGNyZWF0ZURpc3RyaWJ1dGlvbihpdGVtcywgc2l6ZSwgc2VsZWN0ZWRDYXNlKSB7XHJcbiAgY29uc3QgZGlzdHJpYnV0aW9uID0gW107XHJcbiAgY29uc3Qgd2VpZ2h0cyA9IGNhbGN1bGF0ZUl0ZW1XZWlnaHRzKGl0ZW1zLCBzZWxlY3RlZENhc2UpO1xyXG4gIFxyXG4gIGNvbnN0IHN1bSA9IHdlaWdodHMucmVkdWNlKChhY2N1bSwgY3VyclZhbCkgPT4gYWNjdW0gKyBjdXJyVmFsKTtcclxuICBjb25zdCBxdWFudCA9IHNpemUgLyBzdW07XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3ZWlnaHRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBjb25zdCBsaW1pdCA9IHF1YW50ICogd2VpZ2h0c1tpXTtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGltaXQ7ICsraikge1xyXG4gICAgICBkaXN0cmlidXRpb24ucHVzaChpKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGRpc3RyaWJ1dGlvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlSXRlbVdlaWdodHMoaXRlbXMsIHNlbGVjdGVkQ2FzZSkge1xyXG4gIGNvbnN0IHdlaWdodHMgPSBpdGVtcy5tYXAoXHJcbiAgICBpdGVtID0+IChpdGVtLm9kZHMgLyAoc2VsZWN0ZWRDYXNlLmNhc2VSYXJpdHlDb3VudHNbaXRlbS5yYXJpdHkubmFtZV0gfHwgMSkgLyAxMDApXHJcbiAgKTtcclxuICByZXR1cm4gd2VpZ2h0cztcclxufVxyXG4gIFxyXG5mdW5jdGlvbiByYW5kb21JbmRleChkaXN0cmlidXRpb24pIHtcclxuICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoZGlzdHJpYnV0aW9uLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpOyAvLyByYW5kb20gaW5kZXhcclxuICByZXR1cm4gZGlzdHJpYnV0aW9uW2luZGV4XTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7Z2V0UmFuZG9tSW50LCBnZXRSYW5kb21GbG9hdCwgcmFuZG9tR2VuSXRlbSwgY3JlYXRlRGlzdHJpYnV0aW9uLCByYW5kb21JbmRleH07XHJcbiAgIiwiaW1wb3J0IHsgZ2V0UmFuZG9tSW50IH0gZnJvbSAnLi9tYXRoVXRpbHMnO1xyXG5cclxuZnVuY3Rpb24gZ2V0UmFyaXR5T2RkcyhjcmF0ZSkge1xyXG4gIGNvbnN0IHJhcml0eUNvdW50cyA9IHtcclxuICAgIENvbnN1bWVyOiAwLFxyXG4gICAgSW5kdXN0cmlhbDogMCxcclxuICAgICdNaWwtU3BlYyBHcmFkZSc6IDAsXHJcbiAgICBSZXN0cmljdGVkOiAwLFxyXG4gICAgQ2xhc3NpZmllZDogMCxcclxuICAgIENvdmVydDogMCxcclxuICAgIENvbnRyYWJhbmQ6IDAsXHJcbiAgICAnSGlnaCBHcmFkZSc6IDAsXHJcbiAgICBSZW1hcmthYmxlOiAwLFxyXG4gICAgRXhvdGljOiAwLFxyXG4gICAgRXh0cmFvcmRpbmFyeTogMFxyXG4gIH07XHJcblxyXG4gIGNyYXRlLmNvbnRhaW5zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IHJhcml0eU5hbWUgPSBpdGVtLnJhcml0eS5uYW1lO1xyXG5cclxuICAgIGlmIChyYXJpdHlDb3VudHMuaGFzT3duUHJvcGVydHkocmFyaXR5TmFtZSkpIHtcclxuICAgICAgcmFyaXR5Q291bnRzW3Jhcml0eU5hbWVdKys7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oYFVua25vd24gcmFyaXR5OiAke3Jhcml0eU5hbWV9YCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGZpbHRlcmVkUmFyaXR5Q291bnRzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxyXG4gICAgT2JqZWN0LmVudHJpZXMocmFyaXR5Q291bnRzKS5maWx0ZXIoKFtyYXJpdHksIGNvdW50XSkgPT4gY291bnQgPiAwKVxyXG4gICk7XHJcblxyXG4gIHJldHVybiBmaWx0ZXJlZFJhcml0eUNvdW50cztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmFyaXR5Q29sb3IoaXRlbSkge1xyXG5cclxuICBpZihpdGVtLmNhdGVnb3J5KSB7XHJcbiAgICBpZiAoaXRlbS5jYXRlZ29yeS5uYW1lID09PSAnS25pdmVzJyB8fCBpdGVtLmNhdGVnb3J5Lm5hbWUgPT09ICdHbG92ZXMnKVxyXG4gICAgICByZXR1cm4gJyNmZmNjMDAnOyBcclxuICB9XHJcbiAgXHJcbiAgc3dpdGNoIChpdGVtLnJhcml0eS5uYW1lKSB7XHJcbiAgICBjYXNlICdDb25zdW1lciBHcmFkZSc6XHJcbiAgICAgIHJldHVybiAnI2FmYWZhZic7XHJcbiAgICBjYXNlICdJbmR1c3RyaWFsIEdyYWRlJzpcclxuICAgICAgcmV0dXJuICcjNjQ5NmUxJzsgXHJcbiAgICBjYXNlICdNaWwtU3BlYyBHcmFkZSc6XHJcbiAgICAgIHJldHVybiAnIzRiNjljZCc7IFxyXG4gICAgY2FzZSAnUmVzdHJpY3RlZCc6XHJcbiAgICAgIHJldHVybiAnIzg4NDdmZic7IFxyXG4gICAgY2FzZSAnQ2xhc3NpZmllZCc6XHJcbiAgICAgIHJldHVybiAnI2QzMmNlNic7IFxyXG4gICAgY2FzZSAnQ292ZXJ0JzpcclxuICAgICAgcmV0dXJuICcjZWI0YjRiJzsgXHJcbiAgICBjYXNlICdDb250cmFiYW5kJzpcclxuICAgICAgcmV0dXJuICcjODg2YTA4JzsgXHJcbiAgICBcclxuICAgIGNhc2UgJ0hpZ2ggR3JhZGUnOlxyXG4gICAgICByZXR1cm4gJyM0YjY5Y2QnOyBcclxuICAgIGNhc2UgJ1JlbWFya2FibGUnOlxyXG4gICAgICByZXR1cm4gJyM4ODQ3ZmYnOyBcclxuICAgIGNhc2UgJ0V4b3RpYyc6XHJcbiAgICAgIHJldHVybiAnI2QzMmNlNic7IFxyXG4gICAgY2FzZSAnRXh0cmFvcmRpbmFyeSc6XHJcbiAgICAgIHJldHVybiAnI2ViNGI0Yic7IFxyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiAnJzsgXHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldFJhbmRvbVdlYXIoaXRlbSkge1xyXG4gIGlmKGl0ZW0ud2VhcnMpIHtcclxuICAgIHJldHVybiBpdGVtLndlYXJzW2dldFJhbmRvbUludCgwLCBpdGVtLndlYXJzLmxlbmd0aC0xKV0ubmFtZTtcclxuICB9XHJcbiAgcmV0dXJuICcnO1xyXG59XHJcblxyXG5leHBvcnQge2dldFJhcml0eUNvbG9yLCBnZXRSYXJpdHlPZGRzLCBnZXRSYW5kb21XZWFyfTtcclxuICAiLCJcclxuLy8vLyBDQVVUSU9OIFJFTEFURUQgVE8gQ1VTVE9NIFZBTElEQVRJT04gXHJcbi8vIE1peGluZyBkZWZhdWx0IGh0bWwgdmFsaWRhdGlvbiB3aXRoIGN1c3RvbSBwcm92aWRlcyBkaWZmaWN1bHQgcmVzdWx0c1xyXG4vLyBkaXNhYmxlIGRlZmF1bHQgaHRtbCB2YWxpZGF0aW9ucyBpZiBwb3NzaWJsZVxyXG5cclxuY29uc3QgcmVwb3J0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlcG9ydC1idXR0b24nKTtcclxuY29uc3QgcmVwb3J0RGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlcG9ydC1kaWFsb2cnKTtcclxuY29uc3Qgc3VibWl0bG9hZGluZ0luZGljYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXRMb2FkaW5nSW5kaWNhdG9yJyk7XHJcblxyXG5sZXQgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKTtcclxubGV0IGVtYWlsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZS1tYWlsJyk7XHJcbmxldCBpZGVhc0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlcG9ydCcpO1xyXG5sZXQgZXhpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5leGl0QnV0dG9uJyk7XHJcbmxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0QnV0dG9uJyk7XHJcbmxldCBzdGF0dXNMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdGF0dXNMYWJlbCcpO1xyXG5cclxucmVwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIC8vIFNob3cgdGhlIGRpYWxvZ1xyXG4gIHJlcG9ydERpYWxvZy5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcpO1xyXG4gIHJlcG9ydERpYWxvZy5jbGFzc0xpc3QuYWRkKCdmYWRlSW5SZXBvcnQnKTtcclxuICByZXBvcnREaWFsb2cuc2hvd01vZGFsKCk7XHJcbiAgaW5pdGlhbGl6ZUlucHV0cygpO1xyXG4gIFxyXG59KTtcclxuXHJcbmV4aXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZXBvcnREaWFsb2cuY2xvc2UoKSk7XHJcblxyXG5zdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVTdWJtaXQpO1xyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUlucHV0cygpIHtcclxuICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBuYW1lVmVyaWZpY2F0aW9uKTtcclxuICBlbWFpbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZW1haWxWZXJpZmljYXRpb24pO1xyXG4gIGlkZWFzSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBpZGVhc1ZlcmlmaWNhdGlvbik7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChldmVudCkge1xyXG5cclxuICBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuXHJcbiAgaWYgKCFuYW1lVmVyaWZpY2F0aW9uKCkpIGlzVmFsaWQgPSBmYWxzZTtcclxuICBpZiAoIWVtYWlsVmVyaWZpY2F0aW9uKCkpIGlzVmFsaWQgPSBmYWxzZTtcclxuICBpZiAoIWlkZWFzVmVyaWZpY2F0aW9uKCkpIGlzVmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgaWYgKGlzVmFsaWQpIHtcclxuICAgIFxyXG4gICAgY29uc3QgcmVwb3J0T2JqID0ge1xyXG4gICAgICBuYW1lOiBuYW1lSW5wdXQudmFsdWUsXHJcbiAgICAgIGVtYWlsOiBlbWFpbElucHV0LnZhbHVlLFxyXG4gICAgICB0ZXh0OiBpZGVhc0lucHV0LnZhbHVlXHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBiYXNlVXJsID0gJyc7XHJcbiAgXHJcbiAgICBpZihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgIFxyXG4gICAgICAvL2Jhc2VVcmwgPSAnaHR0cDpsb2NhbGhvc3Q6NTUwMCc7IExvY2FsIHByb2QgdGVzdFxyXG4gICAgICBiYXNlVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgIGJhc2VVcmwgPSBiYXNlVXJsLnNsaWNlKDAsIC0xKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcblxyXG4gICAgICBlbmFibGVJbmRpY2F0b3IoKTtcclxuICAgICAgZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9zZW5kLWVtYWlsYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcG9ydE9iailcclxuICAgICAgICBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9ICdUaGFuayB5b3UgZm9yIHlvdXIgZmVlZGJhY2shJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9ICdGYWlsZWQgdG8gc2VuZCBmZWVkYmFjayc7XHJcbiAgICAgICAgZW5hYmxlQnV0dG9uKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9IGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWA7XHJcbiAgICAgIGVuYWJsZUJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgZGlzYWJsZUluZGljYXRvcigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgIHJlc2V0SW5wdXRzKCk7XHJcbiAgICAgIHJlcG9ydERpYWxvZy5jbG9zZSgpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgICBcclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBuYW1lVmVyaWZpY2F0aW9uKCkge1xyXG4gIGlmIChuYW1lSW5wdXQudmFsdWUudHJpbSgpID09PSAnJykge1xyXG4gICAgbmFtZUlucHV0LnNldEN1c3RvbVZhbGlkaXR5KCdXcml0ZSB5b3VyIG5hbWUnKTtcclxuICAgIG5hbWVJbnB1dC5yZXBvcnRWYWxpZGl0eSgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgbmFtZUlucHV0LnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuICBuYW1lSW5wdXQucmVwb3J0VmFsaWRpdHkoKTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtYWlsVmVyaWZpY2F0aW9uKCkge1xyXG5cclxuICAvLyBJZiBjaG9zZW4gdG8gd3JpdGUgZW1haWwgLSB3cml0ZSBpdCBwcm9wZXJseVxyXG4gIGlmIChlbWFpbElucHV0LnZhbHVlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBlbHNlIGlmIChlbWFpbElucHV0LnZhbGlkaXR5LnR5cGVNaXNtYXRjaCkge1xyXG4gICAgZW1haWxJbnB1dC5zZXRDdXN0b21WYWxpZGl0eSgnTWFrZSBzdXJlIHRvIHByb3ZpZGUgcHJvcGVyIGVtYWlsJyk7XHJcbiAgICBlbWFpbElucHV0LnJlcG9ydFZhbGlkaXR5KCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSBlbHNlIHtcclxuICAgIGVtYWlsSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xyXG4gIH1cclxuXHJcbiAgZW1haWxJbnB1dC5yZXBvcnRWYWxpZGl0eSgpO1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpZGVhc1ZlcmlmaWNhdGlvbigpIHtcclxuICBpZiAoaWRlYXNJbnB1dC52YWx1ZS50cmltKCkgPT09ICcnKSB7XHJcbiAgICBpZGVhc0lucHV0LnNldEN1c3RvbVZhbGlkaXR5KCdTYXkgc29tZXRoaW5nLCB5b3VyIGZlZWRiYWNrIGlzIGltcG9ydGFudCA6KScpO1xyXG4gICAgaWRlYXNJbnB1dC5yZXBvcnRWYWxpZGl0eSgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZWxzZSBpZiAoaWRlYXNJbnB1dC52YWx1ZS5sZW5ndGggPCAxNSkge1xyXG4gICAgaWRlYXNJbnB1dC5zZXRDdXN0b21WYWxpZGl0eSgnVHJ5IHRvIGJlIGFzIGluc2lnaHRmdWwgYXMgeW91IGNhbiEnKTtcclxuICAgIGlkZWFzSW5wdXQucmVwb3J0VmFsaWRpdHkoKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBpZGVhc0lucHV0LnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcclxuICB9XHJcblxyXG4gIGlkZWFzSW5wdXQucmVwb3J0VmFsaWRpdHkoKTtcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRJbnB1dHMoKSB7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gJyc7XHJcbiAgZW1haWxJbnB1dC52YWx1ZSA9ICcnO1xyXG4gIGlkZWFzSW5wdXQudmFsdWUgPSAnJztcclxuICBzdGF0dXNMYWJlbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIGVuYWJsZUJ1dHRvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVJbmRpY2F0b3IoKSB7XHJcbiAgc3VibWl0bG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxufVxyXG5mdW5jdGlvbiBkaXNhYmxlSW5kaWNhdG9yKCkge1xyXG4gIHN1Ym1pdGxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZUJ1dHRvbigpIHtcclxuICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIHN1Ym1pdEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59XHJcbmZ1bmN0aW9uIGVuYWJsZUJ1dHRvbigpIHtcclxuICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICBzdWJtaXRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCByZXBvcnRCdXR0b247IiwiYXN5bmMgZnVuY3Rpb24gY2FsbEFwaSh1cmxQb3N0Zml4KSB7XHJcblxyXG4gIC8vIENoYW5nZSB0aGlzIGZvciBwcm9kdWN0aW9uIGJ1aWxkIChpdCB3b250IGJlIHVzaW5nIGxvY2FsaG9zdClcclxuICBsZXQgYmFzZVVybCA9ICcnO1xyXG4gIFxyXG4gIGlmKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcclxuICAgIFxyXG4gICAgLy9iYXNlVXJsID0gJ2h0dHA6bG9jYWxob3N0OjU1MDAnOyBMb2NhbCBwcm9kIHRlc3RcclxuICAgIGJhc2VVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgIGJhc2VVcmwgPSBiYXNlVXJsLnNsaWNlKDAsIC0xKTtcclxuICB9XHJcbiAgXHJcbiAgbGV0IHVybCA9IGAke2Jhc2VVcmx9LyR7dXJsUG9zdGZpeH1gO1xyXG4gIFxyXG4gIHJldHVybiBmZXRjaCh1cmwpXHJcbiAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgU3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgcmV0dXJuIG51bGw7IFxyXG4gICAgfSk7XHJcbn1cclxuICBcclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hDYXNlRGF0YSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhbGxBcGkoJ2RhdGEvY2FzZXMnKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNhc2UgZGF0YTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoQ2Fwc3VsZURhdGEoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYWxsQXBpKCdkYXRhL2NhcHN1bGVzJyk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXBzdWxlIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFNvdXZlbmlyRGF0YSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhbGxBcGkoJ2RhdGEvc291dmVuaXJzJyk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzb3V2ZW5pciBkYXRhOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBdXRvZ3JhcGhDYXBzdWxlRGF0YSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhbGxBcGkoJ2RhdGEvYXV0b2dyYXBoX2NhcHN1bGVzJyk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhdXRvZ3JhcGggY2Fwc3VsZSBkYXRhOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hHcmFmZml0aURhdGEoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYWxsQXBpKCdkYXRhL2dyYWZmaXRpcycpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZ3JhZmZpdGkgZGF0YTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoUGluRGF0YSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhbGxBcGkoJ2RhdGEvcGlucycpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGluIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBcclxuICBjYWxsQXBpLCBcclxuICBmZXRjaENhc2VEYXRhLCBcclxuICBmZXRjaENhcHN1bGVEYXRhLCBcclxuICBmZXRjaFNvdXZlbmlyRGF0YSwgXHJcbiAgZmV0Y2hBdXRvZ3JhcGhDYXBzdWxlRGF0YSwgXHJcbiAgZmV0Y2hHcmFmZml0aURhdGEsIFxyXG4gIGZldGNoUGluRGF0YSBcclxufTsiLCJpbXBvcnQgeyBnZXRSYW5kb21JbnQgfSBmcm9tICcuL21hdGhVdGlscyc7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2FkaW5nSW5kaWNhdG9yKCkge1xyXG4gIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBsb2FkaW5nSW5kaWNhdG9yLmNsYXNzTmFtZSA9ICdsZHMtZWxsaXBzaXMnO1xyXG4gIGxvYWRpbmdJbmRpY2F0b3IuaW5uZXJIVE1MID0gJzxkaXY+PC9kaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+JztcclxuICByZXR1cm4gbG9hZGluZ0luZGljYXRvcjtcclxufVxyXG4gIFxyXG4vLyBVdGlsaXR5IGZ1bmN0aW9uIHRvIGhpZGUgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIGFuZCBzaG93IHRoZSBvcmlnaW5hbCBjb250ZW50XHJcbmZ1bmN0aW9uIHNob3dMb2FkaW5nSW5kaWNhdG9ySW5FbGVtZW50KGVsZW1lbnQpIHtcclxuICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yID0gY3JlYXRlTG9hZGluZ0luZGljYXRvcigpO1xyXG4gIGxvYWRpbmdJbmRpY2F0b3IuaWQgPSAnbG9hZGluZ0luZGljYXRvcic7XHJcbiAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICBlbGVtZW50LmFwcGVuZENoaWxkKGxvYWRpbmdJbmRpY2F0b3IpO1xyXG59XHJcbiAgXHJcbi8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gaGlkZSB0aGUgbG9hZGluZyBpbmRpY2F0b3JcclxuZnVuY3Rpb24gaGlkZUxvYWRpbmdJbmRpY2F0b3JJbkVsZW1lbnQoZWxlbWVudCwgb3JpZ2luYWxDb250ZW50KSB7XHJcbiAgZWxlbWVudC5pbm5lckhUTUwgPSBvcmlnaW5hbENvbnRlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEJvcmRlclJhZGl1cygpIHtcclxuICBcclxuICBjb25zdCBib3JkZXJSYWRpdXNJbnN0cnVjdGlvbnMgPSBbXHJcbiAgICAnMTBweCAyMHB4IDMwcHggNDBweCcsXHJcbiAgICAnMjUlIDEwJScsXHJcbiAgICAnMTAlIDIwJSA0MCUgMjAlOycsXHJcbiAgICAnMTAlIC8gNTAlJyxcclxuICAgICcxMHB4IDEwMHB4IC8gMTIwcHgnLFxyXG4gICAgJzUwJSAyMCUgLyAxMCUgNDAlJ1xyXG4gIF07XHJcblxyXG4gIHJldHVybiBib3JkZXJSYWRpdXNJbnN0cnVjdGlvbnNbZ2V0UmFuZG9tSW50KDAsIGJvcmRlclJhZGl1c0luc3RydWN0aW9ucy5sZW5ndGgtMSldO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHtjcmVhdGVMb2FkaW5nSW5kaWNhdG9yLCBzaG93TG9hZGluZ0luZGljYXRvckluRWxlbWVudCwgaGlkZUxvYWRpbmdJbmRpY2F0b3JJbkVsZW1lbnQsIGdldEJvcmRlclJhZGl1c307IiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIERvbnQgdXNlIHRoZSB3b3JkIGNhc2UgaW4gdGhlIGNvZGVcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5pbXBvcnQgeyBnZXRSYW5kb21JbnQsIGdldFJhbmRvbUZsb2F0LCByYW5kb21HZW5JdGVtLCBjcmVhdGVEaXN0cmlidXRpb24gfSBmcm9tICcuL3V0aWxpdGllcy9tYXRoVXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRSYXJpdHlPZGRzLCBnZXRSYXJpdHlDb2xvciwgZ2V0UmFuZG9tV2VhciB9IGZyb20gJy4vdXRpbGl0aWVzL2NyYXRlVXRpbHMnO1xyXG5pbXBvcnQgcmVwb3J0QnV0dG9uIGZyb20gJy4vcmVwb3J0LXNlY3Rpb24nOyAvLyBuZWVkIHRvIGxvYWQgcmVwb3J0IHNlY3Rpb24sIG90aGVyd2lzZSBhZGQgaW4gd2VicGFjayBlbnRyaWVzXHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgJy4vbG9hZGluZ0luZGljYXRvci5jc3MnO1xyXG5pbXBvcnQgeyBmZXRjaENhc2VEYXRhLCBjYWxsQXBpIH0gZnJvbSAnLi9zZXJ2aWNlcy9zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IGdldEJvcmRlclJhZGl1cyB9IGZyb20gJy4vdXRpbGl0aWVzL3N0eWxlVXRpbHMnO1xyXG5cclxubGV0IHN0YXR1c1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhdHVzJyk7XHJcbmxldCBtb25leVN0YXR1cyA9IDQuMzU7XHJcbmNvbnN0IGtleVByaWNlID0gMi4zNDtcclxuXHJcbmxldCBpdGVtSG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLml0ZW0taG9sZGVyJyk7XHJcbmNvbnN0IGNhc2VPcGVuV2luZG93SG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhc2Utb3Blbi13aW5kb3ctaG9sZGVyJyk7XHJcbmxldCBjYXNlSW1hZ2VTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhc2UtaW1hZ2Utc2VjdGlvbicpO1xyXG5cclxuY29uc3QgY2FzZUxvYWRpbmdJbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FzZUxvYWRpbmdJbmRpY2F0b3InKTtcclxuY29uc3QgaW50ZXJhY3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50ZXJhY3Rpb24tY29udGFpbmVyJyk7XHJcblxyXG5sZXQgY29udGFpbmVyU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nhc2UnKTtcclxuXHJcbmNvbnN0IGNvbnRhaW5lclR5cGVTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGFpbmVyLXR5cGUnKTtcclxuXHJcbmNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuLWJ1dHRvbicpO1xyXG5sZXQgcmVvcGVuQnV0dG9uO1xyXG5sZXQgYmFja0J1dHRvbjtcclxuXHJcbmxldCBjb250YWluZXJzID0gW107XHJcbmxldCBzZWxlY3RlZENhc2UgPSB7fTtcclxubGV0IGZpeGVkSXRlbUNvdW50ID0gMTg7XHJcblxyXG5jb25zdCByb2xsSXRlbUNvdW50ID0gMTUwO1xyXG5sZXQgcm9sbGVkSXRlbXMgPSBbXTtcclxubGV0IGRpc3RyaWJ1dGlvbiA9IFtdO1xyXG5cclxuY29uc3QgaXRlbVJhcml0eUNvdW50cyA9IHtcclxuICAnQ29uc3VtZXIgR3JhZGUnOiAwLFxyXG4gICdJbmR1c3RyaWFsIEdyYWRlJzogMCxcclxuICAnTWlsLVNwZWMgR3JhZGUnOiAwLFxyXG4gIFJlc3RyaWN0ZWQ6IDAsXHJcbiAgQ2xhc3NpZmllZDogMCxcclxuICBDb3ZlcnQ6IDAsXHJcbiAgQ29udHJhYmFuZDogMCxcclxuICAnSGlnaCBHcmFkZSc6IDAsXHJcbiAgUmVtYXJrYWJsZTogMCxcclxuICBFeG90aWM6IDAsXHJcbiAgRXh0cmFvcmRpbmFyeTogMFxyXG59O1xyXG5cclxuXHJcbmluaXRpYWxpemVDb250YWluZXJMb2FkKCk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQ29udGFpbmVyTG9hZChjb250YWluZXJUeXBlID0gJ2Nhc2VzJykge1xyXG4gIHRyeSB7XHJcbiAgICBcclxuICAgIHN3aXRjaChjb250YWluZXJUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ2Nhc2VzJzpcclxuICAgICAgICBjb250YWluZXJzID0gYXdhaXQgY2FsbEFwaSgnZGF0YS9jYXNlcycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdjYXBzdWxlcyc6XHJcbiAgICAgICAgY29udGFpbmVycyA9IGF3YWl0IGNhbGxBcGkoJ2RhdGEvY2Fwc3VsZXMnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnc291dmVuaXJzJzpcclxuICAgICAgICBjb250YWluZXJzID0gYXdhaXQgY2FsbEFwaSgnZGF0YS9zb3V2ZW5pcnMnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYXV0b2dyYXBoX2NhcHN1bGVzJzpcclxuICAgICAgICBjb250YWluZXJzID0gYXdhaXQgY2FsbEFwaSgnZGF0YS9hdXRvZ3JhcGhfY2Fwc3VsZXMnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZ3JhZmZpdGlzJzpcclxuICAgICAgICBjb250YWluZXJzID0gYXdhaXQgY2FsbEFwaSgnZGF0YS9ncmFmZml0aXMnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncGlucyc6XHJcbiAgICAgICAgY29udGFpbmVycyA9IGF3YWl0IGNhbGxBcGkoJ2RhdGEvcGlucycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGNvbnRhaW5lcnMgPSBbXTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBjb250YWluZXJTZWxlY3QuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgY29udGFpbmVycy5tYXAoKGNvbnRhaW5lciwgaW5kZXgpID0+IHtcclxuICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICBvcHRpb24udmFsdWUgPSBpbmRleDtcclxuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY29udGFpbmVyLnByaWNlID8gYCR7Y29udGFpbmVyLm5hbWV9ICgke2NvbnRhaW5lci5wcmljZX0kKWAgOiBjb250YWluZXIubmFtZTtcclxuICAgICAgY29udGFpbmVyU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZXRTZWxlY3RlZENvbnRhaW5lcihjb250YWluZXJzW2NvbnRhaW5lclNlbGVjdC52YWx1ZV0pO1xyXG4gICAgY2FzZU9wZW5XaW5kb3dIb2xkZXIuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIGRpc3BsYXlJbml0aWFsSXRlbXMoKTtcclxuICAgIGluaXRpYWxpemVFdmVudExpc3RlbmVycygpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGNvbnRhaW5lcnM6JywgZXJyb3IpO1xyXG4gICAgaW50ZXJhY3Rpb25Db250YWluZXIuaW5uZXJIVE1MID0gJ1RoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyBjb250YWluZXJzLCByZWZyZXNoIHRoZSBwYWdlIG9yIHRyeSBhZ2FpbiBsYXRlci4nO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjYXNlTG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgaW50ZXJhY3Rpb25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU9wZW5CdXR0b25DbGljaygpIHtcclxuICBvcGVuQ2FzZSgpO1xyXG4gIGluc3RhbnRpYXRlTW9uZXlBbW91bnQoJ3JlZCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVCYWNrQnV0dG9uQ2xpY2soKSB7XHJcbiAgY29uc3QgbGFzdENoaWxkID0gY2FzZU9wZW5XaW5kb3dIb2xkZXIubGFzdENoaWxkO1xyXG4gIGlmIChsYXN0Q2hpbGQgJiYgbGFzdENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnb2J0YWluZWRJdGVtJykpIHtcclxuICAgIGNhc2VPcGVuV2luZG93SG9sZGVyLnJlbW92ZUNoaWxkKGxhc3RDaGlsZCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlT3BlbkJ1dHRvbkNsaWNrKTtcclxuXHJcbiAgcmVvcGVuQnV0dG9uID0gYnV0dG9uLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgcmVvcGVuQnV0dG9uLnRleHRDb250ZW50ID0gYE9wZW4gYW5vdGhlciAoLSR7a2V5UHJpY2V9JClgO1xyXG4gIHJlb3BlbkJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XHJcblxyXG4gIHJlb3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU9wZW5CdXR0b25DbGljayk7XHJcblxyXG4gIGJhY2tCdXR0b24gPSBidXR0b24uY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICBiYWNrQnV0dG9uLnRleHRDb250ZW50ID0gJ0JhY2snO1xyXG4gIGJhY2tCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xyXG5cclxuICBiYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQmFja0J1dHRvbkNsaWNrKTtcclxuXHJcbiAgY29udGFpbmVyU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHNldFNlbGVjdGVkQ29udGFpbmVyKGNvbnRhaW5lcnNbY29udGFpbmVyU2VsZWN0LnZhbHVlXSkpO1xyXG5cclxuICBjb250YWluZXJUeXBlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkVHlwZSA9IGNvbnRhaW5lclR5cGVTZWxlY3QudmFsdWU7XHJcbiAgICBpbml0aWFsaXplQ29udGFpbmVyTG9hZChzZWxlY3RlZFR5cGUpOyAvLyBMb2FkIGNvbnRhaW5lcnMgYmFzZWQgb24gc2VsZWN0ZWQgdHlwZVxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5SW5pdGlhbEl0ZW1zKCkge1xyXG5cclxuICBjb25zdCBjYXNlSXRlbXNMaXN0ID0gWy4uLnNlbGVjdGVkQ2FzZS5jb250YWluc107XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgbGV0IHJhbmRvbUl0ZW0gPSBjYXNlSXRlbXNMaXN0W2dldFJhbmRvbUludCgwLCBjYXNlSXRlbXNMaXN0Lmxlbmd0aCAtIDEpXTtcclxuXHJcbiAgICBsZXQgbmV3SXRlbSA9IGNyZWF0ZUl0ZW1FbGVtZW50KHJhbmRvbUl0ZW0pO1xyXG4gICAgXHJcbiAgICBpdGVtSG9sZGVyLmFwcGVuZENoaWxkKG5ld0l0ZW0pO1xyXG5cclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVJdGVtRWxlbWVudChpdGVtKSB7XHJcbiAgY29uc3QgbmV3SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIG5ld0l0ZW0uY2xhc3NMaXN0LmFkZCgnaXRlbScpO1xyXG5cclxuICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBpZiAoaXRlbS5pbWFnZSkge1xyXG4gICAgaWYoaXRlbS5jYXRlZ29yeSkge1xyXG4gICAgICBpZiAoaXRlbS5jYXRlZ29yeS5uYW1lID09PSAnS25pdmVzJyB8fCBpdGVtLmNhdGVnb3J5Lm5hbWUgPT09ICdHbG92ZXMnKVxyXG4gICAgICAgIGltZy5jbGFzc0xpc3QuYWRkKCdleGNlZWRpbmdseVJhcmUnKTtcclxuICAgICAgICAvLyB3ZWJwYWNrIGZpeFxyXG4gICAgfVxyXG5cclxuICAgIGltZy5zcmMgPSBpdGVtLmltYWdlO1xyXG4gIH1cclxuICBlbHNlXHJcbiAgICBpbWcuc3JjID0gJy4vYXNzZXRzL2ltYWdlcy94cmF5LnBuZyc7XHJcblxyXG4gIGltZy5jbGFzc0xpc3QuYWRkKCdpbWFnZScpO1xyXG5cclxuICBjb25zdCByYXJpdHlDb2xvciA9IGdldFJhcml0eUNvbG9yKGl0ZW0pO1xyXG5cclxuICBuZXdJdGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGBsaW5lYXItZ3JhZGllbnQod2hpdGUgNDAlLCAke3Jhcml0eUNvbG9yfSlgO1xyXG5cclxuICBjb25zdCByYXJpdHlCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICByYXJpdHlCb3guY2xhc3NMaXN0LmFkZCgnaXRlbS1yYXJpdHktYm94Jyk7XHJcbiAgcmFyaXR5Qm94LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHJhcml0eUNvbG9yO1xyXG5cclxuICBuZXdJdGVtLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgbmV3SXRlbS5hcHBlbmRDaGlsZChyYXJpdHlCb3gpO1xyXG5cclxuICByZXR1cm4gbmV3SXRlbTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhdGVSb2xsaW5nUHJvY2VzcygpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgIGxldCB0cmFuc2xhdGVYID0gZ2V0UmFuZG9tSW50KC01MDAwLCAtNjAwMCk7XHJcbiAgICBjYXNlT3BlbldpbmRvd0hvbGRlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yYW5kb20tdHJhbnNsYXRlWGInLCBgJHt0cmFuc2xhdGVYfXB4YCk7XHJcbiAgICB0cmFuc2xhdGVYIC09IGNhc2VPcGVuV2luZG93SG9sZGVyLm9mZnNldFdpZHRoIC8gMjsgLy8gcG9zaXRpb24gb2YgbWFya2VyXHJcbiAgICBjb25zdCBpdGVtTnVtYmVyID0gTWF0aC5mbG9vcigodHJhbnNsYXRlWCAvIDE1MCkgKiAtMSk7XHJcblxyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgJ2JvdW5jZU91dCcpO1xyXG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjYXNlT3BlbldpbmRvd0hvbGRlci5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsICdmbGlwSW5YJyk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZWQnLCAnYm91bmNlT3V0Jyk7XHJcbiAgICAgIGNhc2VPcGVuV2luZG93SG9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGVkJywgJ2ZsaXBJblgnKTtcclxuICAgICAgcmVzb2x2ZShpdGVtTnVtYmVyKTtcclxuICAgIH0sIDYwMDApO1xyXG4gIH0pO1xyXG4gIFxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkZXRlcm1pbmVJdGVtV29uKGl0ZW1zKSB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb2xsSXRlbUNvdW50OyBpKyspIHtcclxuICAgIGNvbnN0IHJhbmRvbUl0ZW0gPSByYW5kb21HZW5JdGVtKGl0ZW1zLCBkaXN0cmlidXRpb24pO1xyXG4gICAgcm9sbGVkSXRlbXMucHVzaChyYW5kb21JdGVtKTtcclxuICAgIGNvbnN0IG5ld0l0ZW0gPSBjcmVhdGVJdGVtRWxlbWVudChyYW5kb21JdGVtKTtcclxuICAgIG5ld0l0ZW0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWRJdGVtJywgJ21vdmVMZWZ0Jyk7XHJcbiAgICBpdGVtSG9sZGVyLmFwcGVuZENoaWxkKG5ld0l0ZW0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaXRlbU51bWJlciA9IGF3YWl0IGluaXRpYXRlUm9sbGluZ1Byb2Nlc3MoKTtcclxuXHJcbiAgcmV0dXJuIHJvbGxlZEl0ZW1zW2l0ZW1OdW1iZXJdO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRJdGVtSW5mbyhpdGVtV29uLCBpdGVtV2Vhcikge1xyXG4gIGxldCBwcmljZTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY2F0ZWdvcnkgPSBpdGVtV29uLmNhdGVnb3J5ID8gaXRlbVdvbi5jYXRlZ29yeS5uYW1lIDogJyc7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FsbEFwaShgZGF0YS9wcmljZT8mY2FzZVR5cGU9JHtzZWxlY3RlZENhc2UudHlwZX0maXRlbT0ke2l0ZW1Xb24ubmFtZX0mJndlYXI9JHtpdGVtV2VhciB8fCAnJ30maXRlbUlEPSR7aXRlbVdvbi5pZH0mY2F0ZWdvcnk9JHtjYXRlZ29yeX1gKTtcclxuICAgIHByaWNlID0gZGF0YS5sb3dlc3RfcHJpY2U7XHJcbiAgICBjb25zdCB3b3J0aCA9IHBhcnNlRmxvYXQocHJpY2Uuc2xpY2UoMSkpO1xyXG4gICAgbW9uZXlTdGF0dXMgKz0gd29ydGg7XHJcbiAgICBpbnN0YW50aWF0ZU1vbmV5QW1vdW50KCdncmVlbicpO1xyXG4gICAgdXBkYXRlTW9uZXlTdGF0dXMoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaXRlbSBwcmljZTonLCBlcnJvcik7XHJcbiAgICBwcmljZSA9ICdNYXJrZXQgcHJpY2Ugbm90IGF2YWlsYWJsZSc7XHJcbiAgfVxyXG4gIGxldCBpdGVtSW5mbyA9IHsgbmFtZTogaXRlbVdvbi5uYW1lLCByYXJpdHk6IGl0ZW1Xb24ucmFyaXR5Lm5hbWUsIHByaWNlfTtcclxuXHJcbiAgY29uc3QgbWluRmxvYXQgPSBpdGVtV29uLm1pbl9mbG9hdDsgXHJcbiAgY29uc3QgbWF4RmxvYXQgPSBpdGVtV29uLm1heF9mbG9hdDsgXHJcbiAgXHJcbiAgY29uc3QgZmxvYXQgPSAobWluRmxvYXQgIT09IHVuZGVmaW5lZCAmJiBtYXhGbG9hdCAhPT0gdW5kZWZpbmVkKSBcclxuICAgICAgPyBnZXRSYW5kb21GbG9hdChtaW5GbG9hdCwgbWF4RmxvYXQpIFxyXG4gICAgICA6IHVuZGVmaW5lZDsgXHJcblxyXG4gIGl0ZW1SYXJpdHlDb3VudHNbaXRlbVdvbi5yYXJpdHldKys7XHJcblxyXG4gIGlmIChmbG9hdClcclxuICAgIGl0ZW1JbmZvLmZsb2F0ID0gZmxvYXQ7XHJcbiAgXHJcbiAgaWYgKGl0ZW1XZWFyKVxyXG4gICAgaXRlbUluZm8ud2VhciA9IGl0ZW1XZWFyO1xyXG5cclxuICByZXR1cm4gaXRlbUluZm87XHJcbn1cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBkaXNwbGF5V29uSXRlbShpdGVtV29uKSB7XHJcbiAgY29uc3Qgb2J0YWluZWRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgb2J0YWluZWRJdGVtLmNsYXNzTGlzdC5hZGQoJ29idGFpbmVkSXRlbScpO1xyXG5cclxuICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBpbWcuc3JjID0gaXRlbVdvbi5pbWFnZSB8fCAnLi9hc3NldHMvaW1hZ2VzL3hyYXkucG5nJztcclxuICBpbWcuY2xhc3NMaXN0LmFkZCgnb2J0YWluZWQtaW1hZ2UnKTtcclxuICBvYnRhaW5lZEl0ZW0uYXBwZW5kQ2hpbGQoaW1nKTtcclxuXHJcbiAgY29uc3QgcmFyaXR5Q29sb3IgPSBnZXRSYXJpdHlDb2xvcihpdGVtV29uKTtcclxuICBjb25zdCByYXJpdHlCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICByYXJpdHlCb3guY2xhc3NMaXN0LmFkZCgnb2J0YWluZWQtaXRlbS1yYXJpdHktYm94Jyk7XHJcbiAgcmFyaXR5Qm94LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHJhcml0eUNvbG9yO1xyXG5cclxuICBvYnRhaW5lZEl0ZW0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCAnZmFkZUluJyk7XHJcblxyXG4gIGNvbnN0IGl0ZW1XZWFyID0gZ2V0UmFuZG9tV2VhcihpdGVtV29uKTtcclxuICBjb25zdCBpdGVtSW5mbyA9IGF3YWl0IGdldEl0ZW1JbmZvKGl0ZW1Xb24sIGl0ZW1XZWFyKTtcclxuXHJcbiAgY29uc3Qgb2J0YWluZWRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgb2J0YWluZWRUZXh0LmNsYXNzTGlzdC5hZGQoJ29idGFpbmVkSXRlbUluZm8nKTtcclxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpdGVtSW5mbykpIHtcclxuICAgIGNvbnN0IHBhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIHBhci50ZXh0Q29udGVudCA9IGAke2tleS50b1VwcGVyQ2FzZSgpfTogJHt2YWx1ZX1gO1xyXG4gICAgaWYgKGtleSA9PT0gJ3Jhcml0eScpIHBhci5zdHlsZS50ZXh0U2hhZG93ID0gYDRweCAycHggNHB4ICR7cmFyaXR5Q29sb3J9YDtcclxuICAgIG9idGFpbmVkVGV4dC5hcHBlbmRDaGlsZChwYXIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYm90dG9tU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGJvdHRvbVNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnYm90dG9tU2VjdGlvbicpO1xyXG4gIGJvdHRvbVNlY3Rpb24uYXBwZW5kQ2hpbGQob2J0YWluZWRUZXh0KTtcclxuXHJcbiAgY29uc3QgYnV0dG9uU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGJ1dHRvblNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnYnV0dG9uU2VjdGlvbicpO1xyXG4gIGJ1dHRvblNlY3Rpb24uYXBwZW5kQ2hpbGQocmVvcGVuQnV0dG9uKTtcclxuICBidXR0b25TZWN0aW9uLmFwcGVuZENoaWxkKGJhY2tCdXR0b24pO1xyXG5cclxuICBib3R0b21TZWN0aW9uLmFwcGVuZENoaWxkKGJ1dHRvblNlY3Rpb24pO1xyXG4gIG9idGFpbmVkSXRlbS5hcHBlbmRDaGlsZChib3R0b21TZWN0aW9uKTtcclxuICBjYXNlT3BlbldpbmRvd0hvbGRlci5hcHBlbmRDaGlsZChvYnRhaW5lZEl0ZW0pO1xyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG9idGFpbmVkSXRlbS5zdHlsZS5ib3JkZXJSYWRpdXMgPSBnZXRCb3JkZXJSYWRpdXMoKTtcclxuICAgIG9idGFpbmVkSXRlbS5zdHlsZS5ib3JkZXJDb2xvciA9IHJhcml0eUNvbG9yO1xyXG4gIH0sIDUwMCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG9wZW5DYXNlKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjbGVhclVwV2luZG93KCk7XHJcblxyXG4gICAgbGV0IGNhc2VQcmljZSA9IDA7XHJcbiAgICBpZihzZWxlY3RlZENhc2UucHJpY2UpIHtcclxuICAgICAgY2FzZVByaWNlID0gcGFyc2VGbG9hdChzZWxlY3RlZENhc2UucHJpY2UpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBtb25leVN0YXR1cyAtPSBrZXlQcmljZSArIGNhc2VQcmljZTtcclxuICAgIHVwZGF0ZU1vbmV5U3RhdHVzKCk7XHJcblxyXG4gICAgY29uc3QgY2FzZUl0ZW1MaXN0ID0gWy4uLnNlbGVjdGVkQ2FzZS5jb250YWluc107XHJcbiAgICBpZihzZWxlY3RlZENhc2UuY29udGFpbnNfcmFyZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGtuaXZlcyA9IFsuLi5zZWxlY3RlZENhc2UuY29udGFpbnNfcmFyZV07XHJcbiAgICAgIGxldCByYW5kb21LbmlmZSA9IHsuLi5rbml2ZXNbZ2V0UmFuZG9tSW50KDAsIDgpXSwgb2RkczogMC4yNn07XHJcbiAgXHJcbiAgICAgIGlmIChjYXNlSXRlbUxpc3QubGVuZ3RoIDwgZml4ZWRJdGVtQ291bnQpIFxyXG4gICAgICAgIGNhc2VJdGVtTGlzdC5wdXNoKHJhbmRvbUtuaWZlKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGRpc3RyaWJ1dGlvbiA9IGNyZWF0ZURpc3RyaWJ1dGlvbihjYXNlSXRlbUxpc3QsIDEwMCwgc2VsZWN0ZWRDYXNlKTtcclxuXHJcbiAgICBjb25zdCBpdGVtV29uID0gYXdhaXQgZGV0ZXJtaW5lSXRlbVdvbihjYXNlSXRlbUxpc3QpO1xyXG4gICAgYXdhaXQgZGlzcGxheVdvbkl0ZW0oaXRlbVdvbik7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9wZW5pbmcgY2FzZTonLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVNb25leVN0YXR1cygpIHtcclxuICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gJ1N0YXRlOiAnICsgbW9uZXlTdGF0dXMudG9GaXhlZCgyKSArICckJztcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNsZWFyVXBXaW5kb3coKSB7XHJcbiAgaXRlbUhvbGRlci5pbm5lckhUTUwgPSAnJztcclxuICBjb25zdCBvYnRhaW5lZEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub2J0YWluZWRJdGVtJyk7XHJcbiAgaWYgKG9idGFpbmVkSXRlbSAmJiBvYnRhaW5lZEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvYnRhaW5lZEl0ZW0nKSkge1xyXG4gICAgY2FzZU9wZW5XaW5kb3dIb2xkZXIucmVtb3ZlQ2hpbGQob2J0YWluZWRJdGVtKTtcclxuICB9XHJcbiAgcm9sbGVkSXRlbXMgPSBbXTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGluc3RhbnRpYXRlTW9uZXlBbW91bnQoY29sb3IpIHtcclxuXHJcbiAgc3RhdHVzVGV4dC5zdHlsZS5jb2xvciA9IGNvbG9yO1xyXG4gIHN0YXR1c1RleHQuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0LWFtb3VudCcpO1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgc3RhdHVzVGV4dC5zdHlsZS5jb2xvciA9ICdibGFjayc7XHJcbiAgICBzdGF0dXNUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodC1hbW91bnQnKTtcclxuICB9LCAxMDAwKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNldFNlbGVjdGVkQ29udGFpbmVyKGNvbnRhaW5lcikge1xyXG4gIHNlbGVjdGVkQ2FzZSA9IHsuLi5jb250YWluZXJ9O1xyXG4gIGZpeGVkSXRlbUNvdW50ID0gY29udGFpbmVyLmNvbnRhaW5zLmxlbmd0aCArIDE7XHJcbiAgaWYgKCFzZWxlY3RlZENhc2UuY2FzZVJhcml0eUNvdW50cykge1xyXG4gICAgc2VsZWN0ZWRDYXNlLmNhc2VSYXJpdHlDb3VudHMgPSBnZXRSYXJpdHlPZGRzKHNlbGVjdGVkQ2FzZSk7XHJcbiAgfVxyXG5cclxuICBsZXQgY2FzZUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgY29uc3QgY2FzZUltYWdlU291cmNlID0gc2VsZWN0ZWRDYXNlLmltYWdlO1xyXG4gIGNhc2VJbWFnZS5zcmMgPSBjYXNlSW1hZ2VTb3VyY2U7XHJcblxyXG4gIGNhc2VJbWFnZVNlY3Rpb24uaW5uZXJIVE1MID0gJyc7XHJcbiAgY2FzZUltYWdlU2VjdGlvbi5hcHBlbmRDaGlsZChjYXNlSW1hZ2UpO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///435\n")}},__webpack_exports__={};__webpack_modules__[435]()})();